247* 64.066 / 28.96
source('C:/Users/ahsa361/OneDrive - PNNL/Desktop/Emissions-MIP-Phase1a/code/timeseries_diff.R', echo=TRUE)
paste0(emi_dir, '/input/', region, '/', pert, '/diff')
source('C:/Users/ahsa361/OneDrive - PNNL/Desktop/Emissions-MIP-Phase1a/code/timeseries_diff.R', echo=TRUE)
# ------------------------------------------------------------------------------
# Program Name: reference.R
# Authors: Hamza Ahsan
# Date Last Modified: September 29, 2021
# Program Purpose: Produces time series line plots of the reference case
# Input Files: ~Emissions-MIP/input/
# Output Files: ~Emissions-MIP/output/
# TODO:
# ------------------------------------------------------------------------------
# Load required libraries
library(dplyr)
library(tidyr)
library(purrr)
library(ggplot2)
library(gridExtra)
library(grid)
# Specify location of Emissions-MIP directory
emi_dir <- paste0('C:/Users/ahsa361/OneDrive - PNNL/Desktop/Emissions-MIP-Phase1a')
# Specify region (i.e., global, land, sea, arctic, NH-land, NH-sea, SH-land,
# SH-sea, NH-atlantic, NH-pacific)
region <- "NH-pacific"
# Define default ggplot colors and associate with models (in case a plot is
# missing a model, the color scheme will remain consistent)
gg_color_hue <- function(n) {
hues = seq(15, 375, length = n + 1)
hcl(h = hues, l = 65, c = 100)[1:n]
}
cols = gg_color_hue(10)
model_colors <- c(CESM1 = cols[1], E3SM = cols[2], GISS = cols[3], CESM2 = cols[4],
MIROC = cols[5], NorESM2 = cols[6], GFDL = cols[7], OsloCTM3 = cols[8],
UKESM = cols[9], GEOS = cols[10])
# Setup directory for difference data
setwd(paste0(emi_dir, '/input/', region, '/reference'))
# ------------------------------------------------------------------------------
# Read in csv files and bind into single data frame. Remove 'unit' column to
# avoid error when binding different classes (i.e., factor and integer).
target_filename <- list.files(getwd(), "*.csv")
experiment <- rbind(map(target_filename, read.csv))
experiment <- lapply(experiment, function(x) {x["unit"] <- NULL; x})
experiment <- bind_rows(experiment)
# Extract model from file names (fourth segment) and bind to experiment data frame
models <- sapply(strsplit(target_filename, "[-.]+"),function(x) x[4])
rep_models <- rep(models, each = 4) # four years
experiment$model <- rep_models
# Correct model names
experiment$model[which(experiment$model == "CMIP6_AerChemMIP")] <- "GISS"
experiment$model[which(experiment$model == "CMIP6_CMIP_CESM")] <- "CESM1"
experiment$model[which(experiment$model == "CMIP6_CMIP_E3SM")] <- "E3SM"
experiment$model[which(experiment$model == "CMIP6_CMIP_CESM2")] <- "CESM2"
View(experiment)
source('C:/Users/ahsa361/OneDrive - PNNL/Desktop/Emissions-MIP-Phase1a/code/reference.R', echo=TRUE)
source('C:/Users/ahsa361/OneDrive - PNNL/Desktop/Emissions-MIP-Phase1a/code/reference.R', echo=TRUE)
source('C:/Users/ahsa361/OneDrive - PNNL/Desktop/Emissions-MIP-Phase1a/code/reference.R', echo=TRUE)
source('C:/Users/ahsa361/OneDrive - PNNL/Desktop/Emissions-MIP-Phase1a/code/reference.R', echo=TRUE)
source('C:/Users/ahsa361/OneDrive - PNNL/Desktop/Emissions-MIP-Phase1a/code/reference.R', echo=TRUE)
source('C:/Users/ahsa361/OneDrive - PNNL/Desktop/Emissions-MIP-Phase1a/code/reference.R', echo=TRUE)
source('C:/Users/ahsa361/OneDrive - PNNL/Desktop/Emissions-MIP-Phase1a/code/reference.R', echo=TRUE)
source('C:/Users/ahsa361/OneDrive - PNNL/Desktop/Emissions-MIP-Phase1a/code/reference.R', echo=TRUE)
source('C:/Users/ahsa361/OneDrive - PNNL/Desktop/Emissions-MIP-Phase1a/code/reference.R', echo=TRUE)
source('C:/Users/ahsa361/OneDrive - PNNL/Desktop/Emissions-MIP-Phase1a/code/reference.R', echo=TRUE)
